<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:TinyMediaInfo.ViewModels"
        xmlns:views="clr-namespace:TinyMediaInfo.Views"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="450"
        x:Class="TinyMediaInfo.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="{DynamicResource Local.WindowTitle}"
        Icon="/Assets/TinyMedia.ico">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <DockPanel DragDrop.AllowDrop="True" Background="Transparent">
        <Panel DockPanel.Dock="Top" VerticalAlignment="Bottom">
            <Grid Margin="14, 17, 14, 0">
                <Grid.RowDefinitions>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal" Grid.Column="0" HorizontalAlignment="Left">
                    <Button Click="OpenFileDialog_OnClick">
                        <StackPanel Orientation="Horizontal">
                            <PathIcon Height="20" Width="20" Margin="0,0,5,0" >
                                <PathIcon.Data>
                                    <GeometryGroup>
                                        <PathGeometry Figures="m11.066 8.004.184-.005h7.5a3.25 3.25 0 0 1 3.245 3.065l.005.185v1.56a6.518 6.518 0 0 0-1.5-1.077v-.483a1.75 1.75 0 0 0-1.75-1.75h-7.5a1.75 1.75 0 0 0-1.744 1.606l-.006.144v7.5a1.75 1.75 0 0 0 1.607 1.744l.143.006h.482c.287.55.65 1.055 1.076 1.5H11.25a3.25 3.25 0 0 1-3.245-3.066L8 18.75v-7.5a3.25 3.25 0 0 1 3.066-3.245Z"></PathGeometry>
                                        <PathGeometry Figures="m15.582 4.233.052.177.693 2.588h-1.553l-.588-2.2a1.75 1.75 0 0 0-2.144-1.238L4.798 5.502a1.75 1.75 0 0 0-1.27 1.995l.032.148 1.942 7.244A1.75 1.75 0 0 0 7 16.176v1.506a3.252 3.252 0 0 1-2.895-2.228l-.052-.176-1.941-7.245a3.25 3.25 0 0 1 2.12-3.928l.178-.052 7.244-1.941a3.25 3.25 0 0 1 3.928 2.12ZM23 17.5a5.5 5.5 0 1 0-11 0 5.5 5.5 0 0 0 11 0Zm-5.59-3.493L17.5 14l.09.008a.5.5 0 0 1 .402.402l.008.09V17l2.505.001.09.008a.5.5 0 0 1 .402.402l.008.09-.008.09a.5.5 0 0 1-.403.402l-.09.008h-2.503v2.503l-.008.09a.5.5 0 0 1-.402.402l-.09.008-.09-.008a.5.5 0 0 1-.402-.402l-.008-.09V18L14.498 18l-.09-.008a.5.5 0 0 1-.402-.402l-.008-.09.008-.09a.5.5 0 0 1 .402-.402l.09-.008H17v-2.5l.008-.09a.5.5 0 0 1 .402-.403Z"></PathGeometry>
                                    </GeometryGroup>
                                </PathIcon.Data>
                            </PathIcon>
                            <TextBlock Text="{DynamicResource Local.OpenFile}" VerticalAlignment="Center"></TextBlock>
                        </StackPanel>
                    </Button>
                    <Button Click="OpenFolderDialog_OnClick">
                        <StackPanel Orientation="Horizontal">
                            <PathIcon Height="20" Width="20" Margin="0,0,5,0" Data="M17.5 11a5.5 5.5 0 1 1 0 11 5.5 5.5 0 0 1 0-11Zm0 2-.09.007a.5.5 0 0 0-.402.402L17 13.5V16L14.498 16l-.09.008a.5.5 0 0 0-.402.402l-.008.09.008.09a.5.5 0 0 0 .402.402l.09.008H17v2.503l.008.09a.5.5 0 0 0 .402.402l.09.008.09-.008a.5.5 0 0 0 .402-.402l.008-.09V17l2.504.001.09-.008a.5.5 0 0 0 .402-.402l.008-.09-.008-.09a.5.5 0 0 0-.403-.402l-.09-.008H18v-2.5l-.008-.09a.5.5 0 0 0-.402-.403L17.5 13ZM8.207 4c.46 0 .908.141 1.284.402l.156.12L12.022 6.5h7.728a2.25 2.25 0 0 1 2.229 1.938l.016.158.005.154v3.06a6.517 6.517 0 0 0-1.499-1.077L20.5 8.75a.75.75 0 0 0-.648-.743L19.75 8h-7.729L9.647 9.979a2.25 2.25 0 0 1-1.244.512l-.196.009-4.707-.001v7.251c0 .38.282.694.648.743l.102.007h7.064c.172.534.412 1.038.709 1.501L4.25 20a2.25 2.25 0 0 1-2.245-2.096L2 17.75V6.25a2.25 2.25 0 0 1 2.096-2.245L4.25 4h3.957Zm0 1.5H4.25a.75.75 0 0 0-.743.648L3.5 6.25v2.749L8.207 9a.75.75 0 0 0 .395-.113l.085-.06 1.891-1.578-1.89-1.575a.75.75 0 0 0-.377-.167L8.207 5.5Z" />
                            <TextBlock Text="{DynamicResource Local.OpenFolder}" VerticalAlignment="Center"></TextBlock>
                        </StackPanel>
                    </Button>
                    <Button Click="ClearItems_OnClick">
                        <StackPanel Orientation="Horizontal">
                            <PathIcon Height="20" Width="20" Margin="0,0,5,0" Data="M12 1.75a3.25 3.25 0 0 1 3.245 3.066L15.25 5h5.25a.75.75 0 0 1 .102 1.493L20.5 6.5h-.796l-1.28 13.02a2.75 2.75 0 0 1-2.561 2.474l-.176.006H8.313a2.75 2.75 0 0 1-2.714-2.307l-.023-.174L4.295 6.5H3.5a.75.75 0 0 1-.743-.648L2.75 5.75a.75.75 0 0 1 .648-.743L3.5 5h5.25A3.25 3.25 0 0 1 12 1.75Zm6.197 4.75H5.802l1.267 12.872a1.25 1.25 0 0 0 1.117 1.122l.127.006h7.374c.6 0 1.109-.425 1.225-1.002l.02-.126L18.196 6.5ZM13.75 9.25a.75.75 0 0 1 .743.648L14.5 10v7a.75.75 0 0 1-1.493.102L13 17v-7a.75.75 0 0 1 .75-.75Zm-3.5 0a.75.75 0 0 1 .743.648L11 10v7a.75.75 0 0 1-1.493.102L9.5 17v-7a.75.75 0 0 1 .75-.75Zm1.75-6a1.75 1.75 0 0 0-1.744 1.606L10.25 5h3.5A1.75 1.75 0 0 0 12 3.25Z" />
                            <TextBlock Text="{DynamicResource Local.ClearList}" VerticalAlignment="Center"></TextBlock>
                        </StackPanel>
                    </Button>
                    <Button Click="CancelFilter_OnClick">
                        <StackPanel Orientation="Horizontal">
                            <PathIcon Height="20" Width="20" Margin="0,0,5,0" Data="M23 7.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Zm-7.146-2.354a.5.5 0 0 0-.708.708L16.793 7.5l-1.647 1.646a.5.5 0 0 0 .708.708L17.5 8.207l1.646 1.647a.5.5 0 0 0 .708-.708L18.207 7.5l1.647-1.646a.5.5 0 0 0-.708-.708L17.5 6.793l-1.646-1.647ZM13.346 12.5a6.536 6.536 0 0 1-1.324-1.5H7.5a.75.75 0 0 0 0 1.5h5.846ZM11 7.5c0-.516.06-1.018.174-1.5H4.5a.75.75 0 0 0 0 1.5H11Zm2.5 8.5a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h3Z" />
                            <TextBlock Text="{DynamicResource Local.CancelFilter}" VerticalAlignment="Center"></TextBlock>
                        </StackPanel>
                    </Button>
                    <Button Click="ExportExcel_OnClick">
                        <StackPanel Orientation="Horizontal">
                            <PathIcon Height="20" Width="20" Margin="0,0,5,0" Data="M6.25 3A3.25 3.25 0 0 0 3 6.25v11.5A3.25 3.25 0 0 0 6.25 21h11.5A3.25 3.25 0 0 0 21 17.75V6.25A3.25 3.25 0 0 0 17.75 3H6.25ZM19.5 8.5H9.25a.75.75 0 0 0-.75.75V19.5H6.25a1.75 1.75 0 0 1-1.75-1.75V6.25c0-.966.784-1.75 1.75-1.75h11.5c.966 0 1.75.784 1.75 1.75V8.5ZM14 10v4h-4v-4h4Zm1.5 4v-4h4v4h-4ZM14 15.5v4h-4v-4h4Zm1.5 4v-4h4v2.25a1.75 1.75 0 0 1-1.75 1.75H15.5Z" />
                            <TextBlock Text="{DynamicResource Local.ExportExcel}" VerticalAlignment="Center"></TextBlock>
                        </StackPanel>
                    </Button>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Grid.Column="1" HorizontalAlignment="Right">
                    <Button Command="{Binding ShowAboutCommand}">
                        <PathIcon Height="20" Width="20" Data="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5Zm0 12a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm0-8.75a2.75 2.75 0 0 1 2.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 0 1-1.5 0c0-1.01.297-1.574 1.051-2.359l.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 0 0-2.493-.128l-.007.128a.75.75 0 0 1-1.5 0A2.75 2.75 0 0 1 12 6.75Z" />
                    </Button>
                </StackPanel>
            </Grid>
        </Panel>
        <Panel DockPanel.Dock="Bottom" VerticalAlignment="Bottom" Height="4">
            <ProgressBar Value="{Binding ValueProgressBar}" IsVisible="{Binding ShowProgressBar}"></ProgressBar>
        </Panel>
        <SplitView Margin="14" IsPaneOpen="{Binding ShowDetailPanel}" DisplayMode="Overlay" PanePlacement="Right" OpenPaneLength="500">
            <SplitView.Pane>
                <TreeDataGrid Source="{Binding DetailSource}" CanUserResizeColumns="True" CanUserSortColumns="False" AutoDragDropRows="False"/>
            </SplitView.Pane>

            <TreeDataGrid Name="MyTree" Source="{Binding Source}"
                          CanUserResizeColumns="True" CanUserSortColumns="False" AutoDragDropRows="False">
                <TreeDataGrid.Styles>
                    <Style Selector="TreeDataGridColumnHeader[SortDirection=Descending] /template/ Path#SortIcon">
                        <Setter Property="Data" Value="M13.5 16a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h3Zm3-5a.75.75 0 0 1 0 1.5h-9a.75.75 0 0 1 0-1.5h9Zm3-5a.75.75 0 0 1 0 1.5h-15a.75.75 0 0 1 0-1.5h15Z"></Setter>
                    </Style>
                    <Style Selector="TreeDataGridRow">
                        <Setter Property="ContextMenu">
                            <ContextMenu>
                                <MenuItem Header="{DynamicResource Local.ItemDetail}" Click="ItemDetailFile_OnClick"></MenuItem>
                                <MenuItem Header="{DynamicResource Local.ItemOpenFile}" Click="ItemOpenFile_OnClick"></MenuItem>
                                <MenuItem Header="{DynamicResource Local.ItemLocateFile}" Click="ItemLocateFile_OnClick"></MenuItem>
                            </ContextMenu>
                        </Setter>
                    </Style>
                    <Style Selector="ScrollViewer#PART_ScrollViewer">
                        <Setter Property="AllowAutoHide" Value="False"></Setter>
                        <Setter Property="Padding" Value="0,0,20,0"></Setter>
                    </Style>
                </TreeDataGrid.Styles>
                <FlyoutBase.AttachedFlyout>
                    <Flyout Placement="BottomEdgeAlignedLeft">
                        <views:MediaFilterView DataContext="{Binding FilterViewModel}"/>
                    </Flyout>
                </FlyoutBase.AttachedFlyout>
            </TreeDataGrid>
        </SplitView>
    </DockPanel>
</Window>
